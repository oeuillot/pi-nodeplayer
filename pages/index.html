<html>
<head>
<TITLE>PI NodeJS Player</TITLE>

<style type="text/css">
#play, #pause, #quit {
	width: 80px;
}

#list {
	display: block;
	width: 160px;
}
</style>

<script type="text/javascript">
	//<![CDATA[ 

	function cmd(type) {
		var xhr = new XMLHttpRequest();

		xhr.open("GET", "omx/" + type, false);
		xhr.send(null);

		var obj = JSON.parse(xhr.responseText);

		if (obj.returnCode !== "OK") {
			alert(obj.returnCode + " " + obj.message);
		}
	}

	function fillList(id, path) {
		var xhr = new XMLHttpRequest();

		xhr.open("GET", "list/" + path, false);
		xhr.send(null);

		var obj = JSON.parse(xhr.responseText);

		if (obj.returnCode !== "OK") {
			alert(obj.returnCode + " " + obj.message);
		} else {
			var comp = document.getElementById(id);

			for (; comp.firstChild;) {
				comp.removeChild(comp.firstChild);
			}

			if (obj.list) {
				obj.list.forEach(function(item) {
					var opt = document.createElement("OPTION");
					opt.value = item

					var txt = document.createTextNode(item);
					opt.appendChild(txt);

					comp.appendChild(opt);
				})
			}
		}
	}

	//]]>
</script>
</head>

<body onload="fillList('list', '')">
	<input id="pause" type="button" value="Pause" onclick="cmd('pause')"
		style="width: 80px" />
	<input id="play" type="button" value="Reprise" onclick="cmd('play')" />
	<input id="quit" type="button" value="Arret" onclick="cmd('quit')" />

	<select id="list" size="10" onclick="play('list')">
	</select>

</body>

</html>